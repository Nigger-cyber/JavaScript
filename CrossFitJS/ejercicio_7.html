<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="assets/normalize.min.css">
		<link rel="stylesheet" href="assets/style.css">
		<link rel="stylesheet" href="assets/extra.css">
		<title>Aprender a programar con JavaScript</title>
	</head>

	<body>
		<header>
			<nav>
				<a href="ejercicio_1.html">Ejercicio 1</a>
				<a href="ejercicio_2.html">Ejercicio 2</a>
				<a href="ejercicio_3.html">Ejercicio 3</a>
				<a href="ejercicio_4.html">Ejercicio 4</a>
				<a href="ejercicio_5.html">Ejercicio 5</a>
				<a href="ejercicio_6.html">Ejercicio 6</a>
				<a href="ejercicio_7.html" class="active">Ejercicio 7</a>
			</nav>
		</header>

		<section>
			<h1>Filtrar habitaciones</h1>

			<select name="habitacion">
				<option value="0">Seleccione habitación</option>
				<option value="modesta">Modesta</option>
				<option value="elegante">Elegante</option>
				<option value="lujosa">Lujosa</option>
			</select>

			<article class="habitacion habitacion-modesta">
				<h1>Modesta</h1>
				<p>Una de las mejores opciones dentro del bajo costo</p>
				<p>A solo <strong>ar$80.-</strong> la noche</p>
			</article>

			<article class="habitacion habitacion-elegante">
				<h1>Elegante</h1>
				<p>Balcón interior, baño privado</p>
				<p>A solo <strong>ar$150.-</strong> la noche</p>
			</article>

			<article class="habitacion habitacion-lujosa">
				<h1>Lujosa</h1>
				<p>Para los más exigentes</p>
				<p>A solo <strong>ar$350.-</strong> la noche</p>
			</article>

		</section>

		<aside>
			<p>Esconder los 3 detalles asignando a cada habitación la clase "esconder" definida en extra.css</p>
			<p>Cuando el usuario selecciona una de las opciones, mostrar la que corresponda (removiendo la clase)</p>
			<p>Si el usuario vuelve a "seleccionar habitación" quedan todas escondidas</p>
		</aside>

		<script>
			/* 1) Seleccionar todas las habitaciones */
			let habitaciones = document.querySelectorAll(".habitacion")
			
			/* 2) Seleccionar el select */
			let menu = document.querySelector("select[name=habitacion]")

			/* 3) Asignar la funcion mostrarOpcion al evento correspondiente */
			menu.onchange = mostrarOpcion

			esconderHabitaciones() //<--1) Cuando cargo la pagina

			/* 4) Pensar una solucion logica para esconder todas las habitaciones cada vez que sea necesario */
			// La posicion de una clase siempre va entre corchetes
			
			// debugger: Sirve para ir viendo paso por paso como funciona el codigo. Por ej en un bucle.

			//WHILE:
			/*
			let contador = 0
			while( contador < 10 ){
				console.log("Esta es el saludo #${contador}`")
				contador++
			}
			*/

			//habitaciones[0].classList.add("esconder")
			//habitaciones[1].classList.add("esconder")
			//habitaciones[2].classList.add("esconder")
			
			function esconderHabitaciones(){
				for(let i = 0; i < habitaciones.length; i++){ // Contador (i) = 0; .lenght significa que abarca todas las habitaciones disponibles (esto es por si se van agregando habitaciones a traves del tiempo o yo nisiquiera se el total de habitaciones que hay); i++ significa que cada vez q termine el bucle sume una habitacion mas y ahi el i de abajo va a cambiar 
					habitaciones[i].classList.add("esconder") // Acá lo que hago es decirle que para el numero de habitacion que corresponde en ese momento, le agregue la clase esconder
				}	
			}

			function mostrarOpcion(){
				esconderHabitaciones() // <-- 2)Cuando se esta por mostrar una habitacion (esconde la anterior)
				/* 5) Obtener la opción seleccionada */
				let opcion = menu.value
				//console.log(`Usted eligió la habitación ${menu.value}`)
				if(opcion == 0){
					return // Con return salgo automaticamente del bucle o funcion
				}

				/* 6) Seleccionar la habitación correspondiente usando un selector dinámico */
				let elegida = document.querySelector(`.habitacion-${opcion}`)
				//console.log(elegida)

				/* 7) Asignar la clase correspondiente */
				elegida.classList.remove("esconder")
			}

			////////////////////////////////////////////

			let links = document.querySelectorAll("nav a")

			links[1].onclick = validarLink
			
			function validarLink(evento){ // "Evento" es un parametro que puede tener cualquier nombre que almacena toda la informacion de lo que ocurrió ante un comportamiento. En este caso será de un click (por el onclik definido arriba)
				evento.preventDeFault() // <-- Con esto, JS interrumpe el comportamiento predeterminado por HTML. En este caso me anula el comportamiento predeterminado del hipervinculo que me lleva a otro ejercicio.
				let rta = confirm(`¿Está seguro que desea ir a ${evento.target.innerText}?`) // Confirm, como en el ejercicio 1. El target es como un querySelector del elemento que estoy clickeando (en este caso ej.2) por lo que podre manipular todo ese elemento. En este caso voy a llamar al parametro ("evento") al cual estoy clickeando, voy a manipularlo con el tarjet y voy a pedirle que me traiga su innerText que se va a llamar Ejercicio 2. 
				if (rta = true) {
					window.location.href = evento.target.href // Window es la ventana del navegador. Con window, JS controla todo el navegador. Acá le estoy diciendo que si mi respuesta es SI, entonces desde la localidad en donde estoy en mi navegador (window.location.href) me mande al evento antes definido.
				}
				console.log(`Se eligió la opcion: ${rta}`)
			}

		</script>
	</body>
</html>
